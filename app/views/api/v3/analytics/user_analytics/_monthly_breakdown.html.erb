
<% 
# handle the special case of any diagnosis and all genders first
dimensions = [Reports::FacilityProgressDimension.new(indicator, diagnosis: :all, gender: :all)]
# then do all the combinations
combinations = [indicator].product([:diabetes, :hypertension]).product([:all, :male, :female, :transgender])
combinations.each_with_object([]) do |c|
  indicator, diagnosis = *c.first
  gender = c.last
  dimensions << Reports::FacilityProgressDimension.new(indicator, diagnosis: diagnosis, gender: gender)
end
%>
<% dimensions.each do |dimension| %>
  <%= render(Reports::MonthlyProgressComponent.new(dimension, range: @range, total_counts: @total_counts, monthly_counts: @monthly_counts)) %>
<% end %>

