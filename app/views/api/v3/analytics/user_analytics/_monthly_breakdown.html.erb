<%= render(Reports::MonthlyProgressV2Component.new(current_facility, range: @range)) %>

<% field = :monthly_registrations_all %>
<%= tag.table(class: "progress-table registrations") do %>
  <tr class="total">
    <td class="row-label"><%= raw t("analytics.all_time") %> <code>(<%= field %>)</code></td>
    <td class="row-value">
      <%= @total_counts.attributes[field] %>
    </td>
  </tr>
  <% @range.reverse_each do |period| %>
    <tr>
      <td class="row-label no-padding"><%= period.to_s(:month_name) %></td>
      <td><%= @counts.find { |c| c.period == period }[field] %></td>
    </tr>
  <% end %>
<% end %>

<% field = :monthly_registrations_htn_all %>
<%= tag.table(class: "progress-table registrations hypertension:all") do %>
  <tr class="total">
    <td class="row-label"><%= raw t("analytics.all_time") %> <code>(<%= field %>)</code></td>
    <td class="row-value">
      <%= @total_counts.attributes[field] %>
    </td>
  </tr>
  <% @range.reverse_each do |period| %>
    <tr>
      <td class="row-label no-padding"><%= period.to_s(:month_name) %></td>
      <td><%= @counts.find { |c| c.period == period }[field] %></td>
    </tr>
  <% end %>
<% end %>

<% field = :monthly_registrations_htn_male %>
<%= tag.table(class: "progress-table registrations hypertension:male") do %>
  <tr class="total">
    <td class="row-label"><%= raw t("analytics.all_time") %> <code>(<%= field %>)</code></td>
    <td class="row-value">
      <%= @total_counts.attributes[field] %>
    </td>
  </tr>
  <% @range.reverse_each do |period| %>
    <tr>
      <td class="row-label no-padding"><%= period.to_s(:month_name) %></td>
      <td><%= @counts.find { |c| c.period == period }[field] %></td>
    </tr>
  <% end %>
<% end %>

<% field = :monthly_registrations_htn_female %>
<%= tag.table(class: "progress-table registrations hypertension:female") do %>
  <tr class="total">
    <td class="row-label"><%= raw t("analytics.all_time") %> <code>(<%= field %>)</code></td>
    <td class="row-value">
      <%= @total_counts.attributes[field] %>
    </td>
  </tr>
  <% @range.reverse_each do |period| %>
    <tr>
      <td class="row-label no-padding"><%= period.to_s(:month_name) %></td>
      <td><%= @counts.find { |c| c.period == period }[field] %></td>
    </tr>
  <% end %>
<% end %>