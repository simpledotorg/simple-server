output_file='benchmark_results.csv'

uname -a | tee ${output_file}
system_profiler -detailLevel mini SPHardwareDataType | tail -n +2 | sed 's/ //' | tee ${output_file}

script/benchmarker -c "bin/rails db:reset"

bin/spring stop > /dev/null

script/benchmarker -n 10 -c "bin/rspec spec/models/region_spec.rb"

script/benchmarker -n 3 -c "bin/rspec spec/features/admin/facilities"

# Only run this once, as it takes at least 10-20 mins for one run
echo "Setting SEED_TYPE=large - next db:reset will take considerably longer..."
SEED_TYPE=large script/benchmarker -n 1 -c "bin/rails db:reset"